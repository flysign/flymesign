var paint,canvas,color,width;$(function(){setAttr()});var signMusicEnd=0,signMusicStart=0,signMusicPlay=0;function setAttr(){(canvas=document.getElementsByClassName("p3-canvas")[0]).width=$(window).width(),canvas.height=$(window).height(),paint=canvas.getContext("2d"),color="#fff",width=5}var startX=0,startY=0;function drawMonitor(){$(".p3").on("touchstart touchmove touchend",function(p){var a,t;switch(app.hasSignTimeOut||(app.p3PlayMusic=!1,$(".p3-sign-title").hide(),$(".p3-time-icon").eq(app.p3ClockNum).show(),app.p3ClockTimer=setInterval(function(){app.p3ClockNum++,$(".p3-time-icon").hide(),5<app.p3ClockNum&&(app.p3ClockNum=0),$(".p3-time-icon").eq(app.p3ClockNum).show()},1e3),$(".p3-musicEnd").show(),app.signTimer=setTimeout(function(){app.drawing=!1,$(".p3-con").removeClass("p3-cur"),app.p3Music[app.playMusicNum].pause(),app.p3Music[app.playMusicNum].muted=!1,app.p3ClockNum=0,clearInterval(app.p3ClockTimer),$(".p3-time-icon").hide(),$(".p3-time-icon").eq(5).show(),$(".p3-player-btn").removeClass("p3-player-btn-jump"),app.p3PlayMusic=!0,app.p3BtnTimer=setInterval(function(){app.p3BtnNum++,1<app.p3BtnNum&&(app.p3BtnNum=0),$(".p3-player-btn-item").hide(),$(".p3-player-btn-item").eq(app.p3BtnNum).show()},300)},5e3),app.hasSignTimeOut=!0),p.type){case"touchstart":app.drawing&&(app.common.browser.isIos&&(app.p3Music[app.playMusicNum].muted=!1),app.p3Music[app.playMusicNum].play()),canvasX=$(".p3-canvas").offset().left,canvasY=$(".p3-canvas").offset().top,startX=p.originalEvent.targetTouches[0].clientX-canvasX,startY=p.originalEvent.targetTouches[0].clientY-canvasY,app.drawing&&(paint.beginPath(),paint.moveTo(startX,startY),paint.lineTo(startX+1,startY+1),paint.strokeStyle=color,paint.lineWidth=width,paint.stroke());break;case"touchmove":app.drawing&&(app.common.browser.isIos&&(app.p3Music[app.playMusicNum].muted=!1),a=p.originalEvent.targetTouches[0].clientX-canvasX,t=p.originalEvent.targetTouches[0].clientY-canvasY,paint.moveTo(startX,startY),paint.lineTo(a,t),paint.closePath(),paint.strokeStyle=color,paint.lineWidth=width,paint.stroke()),startX=a,startY=t;break;case"touchend":$(".p3-con").removeClass("p3-cur"),app.drawing&&(app.common.browser.isIos?app.p3Music[app.playMusicNum].muted=!0:app.p3Music[app.playMusicNum].pause())}})}