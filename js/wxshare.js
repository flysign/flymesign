window.wxshare=function(){var l={title:"微信分享标题",desc:"微信分享描述",link:"微信分享链接",imgUrl:"微信分享图片",timelineText:null,timelineLink:null,timelineImgUrl:null,friendTitle:null,friendDesc:null,friendLink:null,friendImgUrl:null,onSuccess:null,onCancel:null},c=!1;function s(n){if($.extend(l,n),c){if(window.wx){var e=window.wx;e.onMenuShareTimeline({title:l.timelineText||l.desc,link:l.timelineLink||l.link,imgUrl:l.timelineImgUrl||l.imgUrl,success:function(){window._hmt&&window._hmt.push(["_trackEvent","wxshare","Timeline","分享到朋友圈成功"]),l.onSuccess&&l.onSuccess()},cancel:function(){window._hmt&&window._hmt.push(["_trackEvent","wxshare","Timeline","分享到朋友圈取消"]),l.onCancel&&l.onCancel()}}),e.onMenuShareAppMessage({title:l.friendTitle||l.title,desc:l.friendDesc||l.desc,link:l.friendLink||l.link,imgUrl:l.friendImgUrl||l.imgUrl,type:"",dataUrl:"",success:function(){window._hmt&&window._hmt.push(["_trackEvent","wxshare","AppMessage","分享给好友成功"]),l.onSuccess&&l.onSuccess()},cancel:function(){window._hmt&&window._hmt.push(["_trackEvent","wxshare","AppMessage","分享给好友取消"]),l.onCancel&&l.onCancel()}}),e.onMenuShareQQ(l),e.onMenuShareWeibo(l),e.onMenuShareQZone(l)}}else!function(){var o=this;if(o.success)return;if(o.running)return;o.running=!0;var n=location.href.split("#")[0];n=encodeURIComponent(n),$.ajax({url:"//api.benbun.com/wechat/jssign/",data:{url:n},dataType:"jsonp",success:function(n){if(0==n.code&&window.wx){var e=window.wx,i=-1!==window.location.search.indexOf("__wxdebug__=1"),t=n.data;e.config({debug:i,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),e.ready(function(){c=!0,s(l),l.onReady&&l.onReady()}),o.success=!0}},complete:function(){o.running=!1}})}()}return{config:s}}();